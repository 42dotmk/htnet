stages:
  - build
  - test
  - publish
build job:
  stage: build
  tags: 
    - cc-docker
  environment:
    name: staging
  script:
    - dotnet build --configuration Release
test job:
  stage: test
  variables:
    GIT_CLEAN_FLAGS: none
  tags:
    - cc-docker
  environment:
    name: staging
  script:
    - dotnet test --no-build --configuration Release --logger "junit;LogFilePath=Report.xml"
  artifacts:
    reports:
      junit: ./tests/CC.CSX.Tests/Report.xml
package job:
  stage: publish
  tags:
    - cc-docker
  script:
    - dotnet pack -o ./package
  artifacts:
    paths:
      - ./package/**/*

publish job:
  stage: publish





